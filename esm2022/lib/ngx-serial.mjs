export class NgxSerial {
    port;
    options = { baudRate: 9600, dataBits: 8, parity: 'none', bufferSize: 256, flowControl: 'none' }; //Default
    writer;
    readFunction;
    controlCharacter = "\n";
    reader;
    readableStreamClosed;
    writableStreamClosed;
    keepReading = true;
    constructor(readFunction, options, controlCharacter) {
        this.readFunction = readFunction;
        if (options)
            this.options = options;
        if (controlCharacter)
            this.controlCharacter = controlCharacter;
    }
    async sendData(data) {
        await this.writer.write(data);
    }
    async readLoop() {
        while (this.port.readable && this.keepReading) {
            const textDecoder = new TextDecoderStream();
            //const readableStream = new ReadableStream();
            this.readableStreamClosed = this.port.readable.pipeTo(textDecoder.writable);
            this.reader = textDecoder.readable
                .pipeThrough(new TransformStream(new LineBreakTransformer(this.controlCharacter)))
                .getReader();
            try {
                while (true) {
                    const { value, done } = await this.reader.read();
                    if (done) {
                        break;
                    }
                    if (value) {
                        this.readFunction(value);
                    }
                }
            }
            catch (error) {
                console.error("Read Loop error. Have the serial device been disconnected ? ");
            }
        }
    }
    async close(callback) {
        this.keepReading = false;
        this.reader.cancel();
        await this.readableStreamClosed.catch(() => { });
        this.writer.close();
        await this.writableStreamClosed;
        await this.port.close();
        callback(null);
    }
    async connect(callback) {
        this.keepReading = true;
        if ("serial" in navigator) {
            // The Web Serial API is supported by the browser.
            let nav = navigator;
            const ports = await nav.serial.getPorts();
            try {
                this.port = await nav.serial.requestPort();
            }
            catch (error) {
                console.error("Requesting port error: " + error);
                return;
            }
            try {
                await this.port.open(this.options);
            }
            catch (error) {
                console.error("Opening port error: " + error);
                return;
            }
            const textEncoder = new TextEncoderStream();
            this.writableStreamClosed = textEncoder.readable.pipeTo(this.port.writable);
            this.writer = textEncoder.writable.getWriter();
            this.readLoop();
            callback(this.port);
        }
        else {
            console.error("This browser does NOT support the Web Serial API");
        }
    }
}
class LineBreakTransformer {
    container = "";
    controlCharacter;
    constructor(controlCharacter) {
        this.container = '';
        this.controlCharacter = controlCharacter;
    }
    transform(chunk, controller) {
        this.container += chunk;
        const lines = this.container.split(this.controlCharacter);
        this.container = lines.pop();
        lines.forEach((line) => controller.enqueue(line));
    }
    flush(controller) {
        controller.enqueue(this.container);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNlcmlhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL2xpYi9uZ3gtc2VyaWFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sT0FBTyxTQUFTO0lBRVYsSUFBSSxDQUFNO0lBQ1YsT0FBTyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxTQUFTO0lBQzFHLE1BQU0sQ0FBTTtJQUNaLFlBQVksQ0FBVztJQUN2QixnQkFBZ0IsR0FBVyxJQUFJLENBQUM7SUFDaEMsTUFBTSxDQUFLO0lBQ1gsb0JBQW9CLENBQUs7SUFDekIsb0JBQW9CLENBQUs7SUFDekIsV0FBVyxHQUFXLElBQUksQ0FBQztJQUVuQyxZQUFZLFlBQXNCLEVBQUUsT0FBYSxFQUFFLGdCQUFzQjtRQUN2RSxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLE9BQU87WUFDVCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN6QixJQUFJLGdCQUFnQjtZQUNsQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7SUFFN0MsQ0FBQztJQUNNLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBWTtRQUNoQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTyxLQUFLLENBQUMsUUFBUTtRQUdwQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUcsQ0FBQztZQUMvQyxNQUFNLFdBQVcsR0FBRyxJQUFJLGlCQUFpQixFQUFFLENBQUM7WUFDNUMsOENBQThDO1lBQzlDLElBQUksQ0FBQyxv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Q0FBQzthQUFNLENBQUM7WUFDTixPQUFPLENBQUMsS0FBSyxDQUFDLGtEQUFrRCxDQUFDLENBQUM7UUFDcEUsQ0FBQztJQUVILENBQUM7Q0FDRjtBQUVELE1BQU0sb0JBQW9CO0lBQ3hCLFNBQVMsR0FBTSxFQUFFLENBQUM7SUFDVixnQkFBZ0IsQ0FBUztJQUVqQyxZQUFZLGdCQUF3QjtRQUNsQyxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUE7SUFDMUMsQ0FBQztJQUVELFNBQVMsQ0FBQyxLQUFTLEVBQUUsVUFBYztRQUNqQyxJQUFJLENBQUMsU0FBUyxJQUFJLEtBQUssQ0FBQztRQUN4QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVELEtBQUssQ0FBQyxVQUFjO1FBQ2xCLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5PTkVfVFlQRSB9IGZyb20gXCJAYW5ndWxhci9jb21waWxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5neFNlcmlhbCB7XHJcblxyXG4gICAgcHJpdmF0ZSBwb3J0OiBhbnk7XHJcbiAgICBwcml2YXRlIG9wdGlvbnMgPSB7IGJhdWRSYXRlOiA5NjAwLCBkYXRhQml0czogOCwgcGFyaXR5OiAnbm9uZScsIGJ1ZmZlclNpemU6IDI1NiwgZmxvd0NvbnRyb2w6ICdub25lJyB9OyAvL0RlZmF1bHRcclxuICAgIHByaXZhdGUgd3JpdGVyOiBhbnk7XHJcbiAgICBwcml2YXRlIHJlYWRGdW5jdGlvbjogRnVuY3Rpb247XHJcbiAgICBwcml2YXRlIGNvbnRyb2xDaGFyYWN0ZXI6IHN0cmluZyA9IFwiXFxuXCI7XHJcbiAgICBwcml2YXRlIHJlYWRlcjphbnk7XHJcbiAgICBwcml2YXRlIHJlYWRhYmxlU3RyZWFtQ2xvc2VkOmFueTtcclxuICAgIHByaXZhdGUgd3JpdGFibGVTdHJlYW1DbG9zZWQ6YW55O1xyXG4gICAgcHJpdmF0ZSBrZWVwUmVhZGluZzpib29sZWFuID0gdHJ1ZTtcclxuICBcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRGdW5jdGlvbjogRnVuY3Rpb24sIG9wdGlvbnM/OiBhbnksIGNvbnRyb2xDaGFyYWN0ZXI/OiBhbnkpIHtcclxuICAgICAgdGhpcy5yZWFkRnVuY3Rpb24gPSByZWFkRnVuY3Rpb247XHJcbiAgICAgIGlmIChvcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgIGlmIChjb250cm9sQ2hhcmFjdGVyKVxyXG4gICAgICAgIHRoaXMuY29udHJvbENoYXJhY3RlciA9IGNvbnRyb2xDaGFyYWN0ZXI7XHJcbiAgXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2VuZERhdGEoZGF0YTogc3RyaW5nKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKGRhdGEpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWFkTG9vcCgpIHtcclxuICAgICAgXHJcbiAgXHJcbiAgICAgIHdoaWxlICh0aGlzLnBvcnQucmVhZGFibGUgJiYgdGhpcy5rZWVwUmVhZGluZyApIHtcclxuICAgICAgICBjb25zdCB0ZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlclN0cmVhbSgpO1xyXG4gICAgICAgIC8vY29uc3QgcmVhZGFibGVTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oKTtcclxuICAgICAgICB0aGlzLnJlYWRhYmxlU3RyZWFtQ2xvc2VkID0gdGhpcy5wb3J0LnJlYWRhYmxlLnBpcGVUbyh0ZXh0RGVjb2Rlci53cml0YWJsZSk7XHJcbiAgICAgICAgdGhpcy5yZWFkZXIgPSB0ZXh0RGVjb2Rlci5yZWFkYWJsZVxyXG4gICAgICAgICAgLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0obmV3IExpbmVCcmVha1RyYW5zZm9ybWVyKHRoaXMuY29udHJvbENoYXJhY3RlcikpKVxyXG4gICAgICAgICAgLmdldFJlYWRlcigpO1xyXG4gIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCB0aGlzLnJlYWRlci5yZWFkKCk7XHJcbiAgICAgICAgICAgIGlmIChkb25lKSB7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZWFkRnVuY3Rpb24odmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWFkIExvb3AgZXJyb3IuIEhhdmUgdGhlIHNlcmlhbCBkZXZpY2UgYmVlbiBkaXNjb25uZWN0ZWQgPyBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgY2xvc2UoY2FsbGJhY2s6RnVuY3Rpb24pIHtcclxuICAgICAgdGhpcy5rZWVwUmVhZGluZyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnJlYWRlci5jYW5jZWwoKTtcclxuICAgICAgYXdhaXQgdGhpcy5yZWFkYWJsZVN0cmVhbUNsb3NlZC5jYXRjaCgoKSA9PiB7fSk7XHJcbiAgICAgIHRoaXMud3JpdGVyLmNsb3NlKCk7XHJcbiAgICAgIGF3YWl0IHRoaXMud3JpdGFibGVTdHJlYW1DbG9zZWQ7XHJcbiAgICAgIGF3YWl0IHRoaXMucG9ydC5jbG9zZSgpO1xyXG4gICAgICBjYWxsYmFjayhudWxsKTtcclxuICAgIH1cclxuICBcclxuICAgIHB1YmxpYyBhc3luYyBjb25uZWN0KGNhbGxiYWNrOkZ1bmN0aW9uKSB7XHJcbiAgICAgIHRoaXMua2VlcFJlYWRpbmcgPSB0cnVlO1xyXG4gICAgICBpZiAoXCJzZXJpYWxcIiBpbiBuYXZpZ2F0b3IpIHtcclxuICAgICAgICAvLyBUaGUgV2ViIFNlcmlhbCBBUEkgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLlxyXG4gICAgICAgIGxldCBuYXY6IGFueSA9IG5hdmlnYXRvcjtcclxuICAgICAgICBjb25zdCBwb3J0cyA9IGF3YWl0IG5hdi5zZXJpYWwuZ2V0UG9ydHMoKTtcclxuICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdGhpcy5wb3J0ID0gYXdhaXQgbmF2LnNlcmlhbC5yZXF1ZXN0UG9ydCgpO1xyXG4gIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVxdWVzdGluZyBwb3J0IGVycm9yOiBcIiArIGVycm9yKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgYXdhaXQgdGhpcy5wb3J0Lm9wZW4odGhpcy5vcHRpb25zKTtcclxuICBcclxuICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIk9wZW5pbmcgcG9ydCBlcnJvcjogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgIGNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyU3RyZWFtKCk7XHJcbiAgICAgICAgdGhpcy53cml0YWJsZVN0cmVhbUNsb3NlZCA9IHRleHRFbmNvZGVyLnJlYWRhYmxlLnBpcGVUbyh0aGlzLnBvcnQud3JpdGFibGUpO1xyXG4gICAgICAgIHRoaXMud3JpdGVyID0gdGV4dEVuY29kZXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7XHJcbiAgXHJcbiAgICAgICAgdGhpcy5yZWFkTG9vcCgpO1xyXG4gIFxyXG4gICAgICAgIGNhbGxiYWNrKHRoaXMucG9ydCk7XHJcbiAgXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlRoaXMgYnJvd3NlciBkb2VzIE5PVCBzdXBwb3J0IHRoZSBXZWIgU2VyaWFsIEFQSVwiKTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBjbGFzcyBMaW5lQnJlYWtUcmFuc2Zvcm1lciB7XHJcbiAgICBjb250YWluZXI6IGFueT1cIlwiO1xyXG4gICAgcHJpdmF0ZSBjb250cm9sQ2hhcmFjdGVyOiBzdHJpbmc7XHJcbiAgXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250cm9sQ2hhcmFjdGVyOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5jb250YWluZXIgPSAnJztcclxuICAgICAgdGhpcy5jb250cm9sQ2hhcmFjdGVyID0gY29udHJvbENoYXJhY3RlclxyXG4gICAgfVxyXG4gIFxyXG4gICAgdHJhbnNmb3JtKGNodW5rOmFueSwgY29udHJvbGxlcjphbnkpIHtcclxuICAgICAgdGhpcy5jb250YWluZXIgKz0gY2h1bms7XHJcbiAgICAgIGNvbnN0IGxpbmVzID0gdGhpcy5jb250YWluZXIuc3BsaXQodGhpcy5jb250cm9sQ2hhcmFjdGVyKTtcclxuICAgICAgdGhpcy5jb250YWluZXIgPSBsaW5lcy5wb3AoKTtcclxuICAgICAgbGluZXMuZm9yRWFjaCgobGluZTogYW55KSA9PiBjb250cm9sbGVyLmVucXVldWUobGluZSkpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZmx1c2goY29udHJvbGxlcjphbnkpIHtcclxuICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHRoaXMuY29udGFpbmVyKTtcclxuICAgIH1cclxuICB9Il19